<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <%- include ("../partials/head") %>
</head>
<body class="container">

<header>
    <%- include ("../partials/header") %>
</header>

<main>
    <div style="margin-top: 25px; min-width: 500px;">
        <div class="row">
          <div class="col">
            <div class="jumbotron shadow p-3 mb-5 bg-white rounded" style="padding:25px;">
                
              <div class="container" style="text-align: center;">
                <h1><span class="badge badge-light"><%=user.username%></span></h1>
                <h5><span class="badge badge-info">Joined Linker on <%=user.date_created.toISOString().split("T")[0]%></span></h5>
                <h5><span class="badge badge-dark"><%= user.email %></span></h5>
                <h4><span class="badge badge-secondary"><%= user.bio %></span></h4>
                <form action="/follow" method="post">
                    <% if (follow) { %>
                        <button class="btn btn-primary" name="follow" value=<%=user.username%>>Unfollow</button>
                    <% } else { %>
                        <button  class="btn btn-primary" name="follow" value=<%=user.username%>>Follow</button>
                    <% } %>
                </form>

                
              </div>
                

            </div>
            <div class="jumbotron shadow p-3 mb-5 bg-white rounded" style="padding:25px;">
                <h1>Followers</h1>
                <% followers.forEach(follower => { %>
                    <a href="/user/<%=follower.username%>"><%= follower.username %> </a> <br>
                <% }) %> 
                
            </div>
            <div class="jumbotron shadow p-3 mb-5 bg-white rounded" style="padding:25px;">
                <h1>Following</h1>
                <% following.forEach(f => { %>
                    <a href="/user/<%=f.username%>"><%= f.username %> </a> <br>
                <% }) %> 
                
            </div>
          </div>
          <div class="col">
            <% if(typeof posts !== 'undefined') { %>
                <% posts.forEach(element => { %>
                <%- include ("../partials/post", {post: element}) %>
            <% }); %>
            <% } %> 
            <div class="jumbotron" style="padding:25px;">
                <h4>No more posts!</h4>
            </div>
            </div>
        </div>
      </div>
    
</main>

<footer>
    <%- include ("../partials/footer") %>
</footer>

</body>
</html>