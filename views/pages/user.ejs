<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <%- include ("../partials/head") %>
</head>
<body class="container">

<header>
    <%- include ("../partials/header") %>
</header>

<main>
    <div class="container shadow p-3 mb-5 bg-white rounded" style="margin-top: 25px; min-width: 500px;">
        <div class="row">
          <div class="col">
            <div class="jumbotron shadow-sm p-3 mb-5 bg-white rounded" style="padding:25px;">
                
                <h1><%=user.username%></h1>

                <form action="/follow" method="post">
                    <% if (follow) { %>
                        <button class="btn btn-primary" name="follow" value=<%=user.username%>>Unfollow</button>
                    <% } else { %>
                        <button  class="btn btn-primary" name="follow" value=<%=user.username%>>Follow</button>
                    <% } %>
                </form>
                <br>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                    Launch demo modal
                </button>
            </div>
            <div class="jumbotron shadow-sm p-3 mb-5 bg-white rounded" style="padding:25px;">
                <h1>Followers</h1>
                <% followers.forEach(follower => { %>
                    <a href="/user/<%=follower.username%>"><%= follower.username %> </a> <br>
                <% }) %> 
                
            </div>
            <div class="jumbotron shadow-sm p-3 mb-5 bg-white rounded" style="padding:25px;">
                <h1>Following</h1>
                <% following.forEach(f => { %>
                    <a href="/user/<%=f.username%>"><%= f.username %> </a> <br>
                <% }) %> 
                
            </div>
          </div>
          <div class="col">
              <h4><%= user.username %> Posts</h4>
              <hr>
            <% if(typeof posts !== 'undefined') { %>
                <% posts.forEach(element => { %>
                <%- include ("../partials/post", {title: element.title, content: element.body, author: element.author}) %>
            <% }); %>
            <% } %> 
            <div class="jumbotron" style="padding:25px;">
                <h4>No more posts!</h4>
            </div>
            </div>
        </div>
      </div>
    

      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              ...
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>
    
</main>

<footer>
    <%- include ("../partials/footer") %>
</footer>

</body>
</html>